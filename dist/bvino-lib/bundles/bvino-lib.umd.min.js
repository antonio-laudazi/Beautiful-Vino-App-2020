!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("amazon-cognito-identity-js"),require("rxjs"),require("aws-sdk/clients/cognitoidentityserviceprovider"),require("@angular/platform-browser/animations"),require("ngx-toastr"),require("@angular/router"),require("@angular/common/http"),require("@angular/core")):"function"==typeof define&&define.amd?define("bvino-lib",["exports","amazon-cognito-identity-js","rxjs","aws-sdk/clients/cognitoidentityserviceprovider","@angular/platform-browser/animations","ngx-toastr","@angular/router","@angular/common/http","@angular/core"],e):e(t["bvino-lib"]={},t.amazonCognitoIdentityJs,t.rxjs,t.CognitoIdentityServiceProvider,t.ng.platformBrowser.animations,t.ngxToastr,t.ng.router,t.ng.common.http,t.ng.core)}(this,function(t,f,v,r,e,n,o,i,a){"use strict";var c=(u.prototype.set=function(t,e){this.sessionMap.set(t,e)},u.prototype.get=function(t){return this.sessionMap.get(t)},u.prototype.clearSession=function(){this.sessionMap.clear()},u.prototype.deleteKey=function(t){this.sessionMap["delete"](t)},u.decorators=[{type:a.Injectable}],u.ctorParameters=function(){return[]},u);function u(){this.sessionMap=new Map}var s=(p.prototype.ngOnInit=function(){throw new Error("Method not implemented.")},p.prototype.signup=function(t,e,n){var o=this,i=[],r={Name:"email",Value:t},a={Name:"name",Value:n},c={Name:"nickname",Value:n},u=new f.CognitoUserAttribute(r),s=new f.CognitoUserAttribute(a),p=new f.CognitoUserAttribute(c);return i.push(u),i.push(s),i.push(p),v.Observable.create(function(n){return o.userPool.signUp(t,e,i,null,function(t,e){t?(n.error(t),console.log(t)):(n.next(e),n.complete())})})},p.prototype.signin=function(t,e){var n={Username:t,Password:e},o=new f.AuthenticationDetails(n),i={Username:t,Pool:this.userPool},r=new f.CognitoUser(i);return r.setAuthenticationFlowType("USER_PASSWORD_AUTH"),v.Observable.create(function(e){r.authenticateUser(o,{onSuccess:function(t){e.next(t),e.complete()},onFailure:function(t){console.log(t),e.error(t)},newPasswordRequired:function(t){t.challenge="NEW_PASSWORD_REQUIRED",e.next(t),e.complete()}})})},p.prototype.signOut=function(t){var e={Username:t,Pool:this.userPool};new f.CognitoUser(e).signOut()},p.prototype.forgotPassword=function(t){var e={Username:t,Pool:this.userPool},n=new f.CognitoUser(e);return v.Observable.create(function(e){n.forgotPassword({onSuccess:function(t){e.next(t),e.complete()},onFailure:function(t){console.log(t),e.error(t)}})})},p.prototype.changePassword=function(t,e,o){var n={Username:t,Pool:this.userPool},i=new f.CognitoUser(n);return i.getSession(function(t){var e=t;console.log("session: "+JSON.stringify(e))}),new r({region:"eu-central-1"}),v.Observable.create(function(n){i.changePassword(e,o,function(t,e){e&&(console.log("result change password: "+JSON.stringify(e)),n.next(e),n.complete()),t&&(console.log("error change password: "+JSON.stringify(t)),n.error(t))})})},p.prototype.isLoggedIn=function(){return null!==this.userPool.getCurrentUser()},p.prototype.getAuthenticatedUser=function(){return this.userPool.getCurrentUser()},p.decorators=[{type:a.Injectable}],p.ctorParameters=function(){return[{type:c},{type:undefined,decorators:[{type:a.Inject,args:["env"]}]}]},p);function p(t,e){this.env=e,this.poolData={UserPoolId:this.env.UserPoolId,ClientId:this.env.ClientId},this.userPool=new f.CognitoUserPool(this.poolData)}function h(e,a,c,u){return new(c=c||Promise)(function(t,n){function o(t){try{r(u.next(t))}catch(e){n(e)}}function i(t){try{r(u["throw"](t))}catch(e){n(e)}}function r(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(o,i)}r((u=u.apply(e,a||[])).next())})}function d(o,i){var r,a,c,t,u={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function n(t){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,a&&(c=2&t[0]?a["return"]:t[0]?a["throw"]||((c=a["return"])&&c.call(a),0):a.next)&&!(c=c.call(a,t[1])).done)return c;switch(a=0,c&&(t=[2&t[0],c.value]),t[0]){case 0:case 1:c=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(c=0<(c=u.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3])){u.label=t[1];break}if(6===t[0]&&u.label<c[1]){u.label=c[1],c=t;break}if(c&&u.label<c[2]){u.label=c[2],u.ops.push(t);break}c[2]&&u.ops.pop(),u.trys.pop();continue}t=i.call(o,u)}catch(e){t=[6,e],a=0}finally{r=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}var l=(g.prototype.presentAlert=function(e){return h(this,void 0,void 0,function(){return d(this,function(t){return this.toastrService.success(e),[2]})})},g.prototype.presentErrorAlert=function(e){return h(this,void 0,void 0,function(){return d(this,function(t){return this.toastrService.error(e),[2]})})},g.decorators=[{type:a.Injectable}],g.ctorParameters=function(){return[{type:o.Router},{type:n.ToastrService}]},g);function g(t,e){this.router=t,this.toastrService=e}var m=(y.prototype.post=function(t,e){return this.http.post(this.env.baseAppUrlGet+this.env.pathSeparator+t,e)},y.prototype.postPut=function(t,e){return this.http.post(this.env.baseAppUrlPut+this.env.pathSeparator+t,e)},y.prototype.postNotifica=function(t,e){return this.http.post(this.env.baseAppUrlNotifica+this.env.pathSeparator+t,e)},y.prototype.postConnect=function(t,e){return this.http.post(this.env.baseAppUrlConnect+this.env.pathSeparator+t,e)},y.decorators=[{type:a.Injectable}],y.ctorParameters=function(){return[{type:i.HttpClient},{type:i.HttpBackend},{type:undefined,decorators:[{type:a.Inject,args:["env"]}]}]},y);function y(t,e,n){this.http=t,this.backEnd=e,this.env=n}var N=function dt(){},A=function lt(){},E=function gt(){},U=function mt(){},P=(w.prototype.getRichiestaGetUtenti=function(){var t=new N;return t.functionName=this.env.getUtentiFunctionName,t},w.prototype.getRichiestaGetUtentiAzienda=function(t){var e=new N;return e.functionName=this.env.getUtentiAziendaFunctionName,e.idAzienda=t,e},w.prototype.getRichiestaGetUtente=function(t){var e=new N;return e.functionName=this.env.getUtenteFunctionName,e.idUtente=t,e},w.prototype.getRichiestaGetUtenteEmail=function(t){var e=new N;return e.functionName=this.env.getUtenteEmailFunctionName,e.emailUtente=t,e},w.prototype.getRichiestaGetAziende=function(){var t=new N;return t.functionName=this.env.getAziendeFunctionName,t},w.prototype.getRichiestaGetAzienda=function(t){var e=new N;return e.functionName=this.env.getAziendaFunctionName,e.idAzienda=t,e},w.prototype.getRichiestaGetBadges=function(){var t=new N;return t.functionName=this.env.getBadgesFunctionName,t},w.prototype.getRichiestaGetEventi=function(){var t=new N;return t.functionName=this.env.getEventiFunctionName,t.idUtente="",t.elencoCompleto="S",t},w.prototype.getRichiestaGetEventiAzienda=function(t){var e=new N;return e.functionName=this.env.getEventiAziendaFunctionName,e.idAzienda=t,e.idUtente="",e.elencoCompleto="S",e},w.prototype.getRichiestaGetEventoUtente=function(t,e,n){var o=new N;return o.functionName=this.env.getEventoFunctionName,o.idEvento=t,o.idUtente=n,o.dataEvento=e,o},w.prototype.getRichiestaGetEvento=function(t){var e=new N;return e.functionName=this.env.getEventoFunctionName,e.idEvento=t,e},w.prototype.getRichiestaGetProvincie=function(){var t=new N;return t.functionName=this.env.getProvincieFunctionName,t},w.prototype.getRichiestaGetFeed=function(){var t=new N;return t.functionName=this.env.getFeedFunctionName,t},w.prototype.getRichiestaGetFeedAzienda=function(t){var e=new N;return e.functionName=this.env.getFeedAziendaFunctionName,e.idAzienda=t,e},w.prototype.getRichiestaGetVini=function(){var t=new N;return t.functionName=this.env.getViniFunctionName,t},w.prototype.getRichiestaGetVino=function(t){var e=new N;return e.functionName=this.env.getVinoFunctionName,e.idVino=t,e},w.prototype.getRichiestaGetViniAzienda=function(t){var e=new N;return e.idAzienda=t,e.functionName=this.env.getViniAziendaFunctionName,e},w.prototype.getRichiestaGetProfiloAzienda=function(t){var e=new N;return e.idProfiloAzienda=t,e.functionName=this.env.getProfiloAziendaFunctionName,e},w.prototype.getRichiestaPutImmagine=function(t,e,n){var o=new A;return o.base64Image=t,o.filename=e,o.tipoEntita=n,o.functionName=this.env.putImmaginiFunctionName,o},w.prototype.getRichiestaPutProvincia=function(t){var e=new A;return e.functionName=this.env.putProvinciaFunctionName,e.provincia=t,e},w.prototype.getRichiestaPutUtente=function(t){var e=new A;return e.functionName=this.env.putUtenteFunctionName,e.utente=t,e},w.prototype.getRichiestaPutEvento=function(t){var e=new A;return e.functionName=this.env.putEventoFunctionName,e.evento=t,e},w.prototype.getRichiestaPutFeed=function(t){var e=new A;return e.functionName=this.env.putFeedFunctionName,e.feed=t,e},w.prototype.getRichiestaPutVino=function(t){var e=new A;return e.functionName=this.env.putVinoFunctionName,e.vino=t,e},w.prototype.getRichiestaPutAzienda=function(t){var e=new A;return e.functionName=this.env.putAziendaFunctionName,e.azienda=t,e},w.prototype.getRichiestaPutuserProfileWithImage=function(t){var e=new A;return e.functionName=this.env.putUserProfileImageWithUserFunctionName,e.utente=t,e},w.prototype.getRichiestaPutBadge=function(t){var e=new A;return e.functionName=this.env.putVinoFunctionName,e.badge=t,e},w.prototype.getRichiestaNotifica=function(t){var e=new E;return e.messaggio=t,e},w.prototype.getRichiestaAggiungiEventoAPreferiti=function(t,e,n,o,i){var r=new U;return r.idUtente=t,r.idEvento=e,r.dataEvento=n,r.statoEvento="P",r.statoPreferitoEvento=o,r.statoAcquistatoEvento=i,r.functionName=this.env.connectEventoAUtenteFunctionName,r},w.prototype.getRichiestaAcquistaEvento=function(t,e,n,o,i,r,a){var c=new U;return c.idUtente=t,c.idEvento=e,c.dataEvento=n,c.dataPrenotazioneEvento=o,c.statoEvento="A",c.statoPreferitoEvento=i,c.statoAcquistatoEvento=r,c.functionName=this.env.connectEventoAUtenteFunctionName,c.numeroPartecipanti=a,c},w.prototype.getRichiestaRimuoviEventoDaPreferiti=function(t,e,n,o,i){var r=new U;return r.idUtente=t,r.idEvento=e,r.dataEvento=n,r.statoEvento="D",r.statoPreferitoEvento=o,r.statoAcquistatoEvento=i,r.functionName=this.env.connectEventoAUtenteFunctionName,r},w.decorators=[{type:a.Injectable}],w.ctorParameters=function(){return[{type:undefined,decorators:[{type:a.Inject,args:["env"]}]}]},w);function w(t){this.env=t}var R=(F.decorators=[{type:a.Injectable}],F);function F(){this.RUOLO_SUPER_ADMIN="SA",this.RUOLO_AZIENDA_ADMIN="AA",this.RUOLO_UTENTE_GENERICO="UG",this.RUOLO_UTENTE_AZIENDA="UA",this.KEY_AZIENDA_ID_DEFAULT="000",this.KEY_AZIENDA_NOME_DEFAULT="Beautiful Vino",this.KEY_AZIENDA_LOGO_DEFAULT="",this.KEY_AZIENDA_SPLASHSCREEN_DEFAULT="",this.KEY_AZIENDA_PAYPALCODE_DEFAULT=""}var b=(S.forRoot=function(t){return{ngModule:S,providers:[{provide:"env",useValue:t}]}},S.decorators=[{type:a.NgModule,args:[{declarations:[],imports:[i.HttpClientModule,e.BrowserAnimationsModule,n.ToastrModule.forRoot()],providers:[s,c,l,m,P,R],exports:[]}]}],S);function S(){}var I=(z.prototype.putNotifica=function(t){return this.httpService.postNotifica(this.env.notificationServiceName,t)},z.prototype.put=function(t){return this.httpService.postPut(this.env.putServiceName,t)},z.prototype.get=function(t){return this.httpService.post(this.env.getServiceName,t)},z.prototype.connect=function(t){return this.httpService.postConnect(this.env.connectServiceName,t)},z.decorators=[{type:a.Injectable}],z.ctorParameters=function(){return[{type:m},{type:undefined,decorators:[{type:a.Inject,args:["env"]}]}]},z);function z(t,e){this.httpService=t,this.env=e}var G=function yt(){},_=function Nt(){},C=function At(){},V=function Et(){},O=function Ut(){},D=function Pt(){},T=function wt(){},x=function Rt(){},j=function Ft(){},M=function bt(){},k=function St(){},B=function It(){},L=function zt(){},q=function Gt(){},Z=function _t(){},H=function Ct(){},K=function Vt(){},Y=function Ot(){},W=function Dt(){},J=function Tt(){},Q=function xt(){},X=function jt(){},$=function Mt(){},tt=function kt(){},et=function Bt(){},nt=function Lt(){},ot=function qt(){},it=function Zt(){},rt=function Ht(){},at=function Kt(){},ct=function Yt(){},ut=function Wt(){},st=function Jt(){},pt=function Qt(){},ft=function Xt(){},vt=function $t(){},ht=function te(){};t.BvinoLibModule=b,t.BVAuthorizationService=s,t.SessionService=c,t.BVHttpService=m,t.RichiesteService=P,t.AlertService=l,t.BVCommonService=I,t.ConstantsService=R,t.AccessToken=G,t.AccessTokenPayload=_,t.AwsToken=C,t.IdToken=V,t.IdTokenPayload=O,t.RefreshToken=D,t.AziendaUtente=T,t.BadgeUtente=x,t.EventoUtente=j,t.Utente=M,t.UtenteUtente=k,t.VinoUtente=B,t.Azienda=L,t.EventoAzienda=q,t.VinoAzienda=Z,t.AziendaVino=H,t.EventoVino=K,t.UtenteVino=Y,t.Vino=W,t.AziendaEvento=J,t.BadgeEvento=Q,t.Evento=X,t.ProvinciaEvento=$,t.UtenteEvento=tt,t.VinoEvento=et,t.AziendaFeed=nt,t.AziendaVinoFeed=ot,t.EventoFeed=it,t.Feed=rt,t.VinoFeed=at,t.Badge=ct,t.RichiestaGetGenerica=N,t.RispostaGetGenerica=ut,t.RichiestaPutGenerica=A,t.RispostaPutGenerica=st,t.RichiestaNotificaGenerica=E,t.RispostaNotificaGenerica=pt,t.RichiestaConnectGenerica=U,t.RispostaConnectGenerica=ft,t.Provincia=vt,t.ProfiloAzienda=ht,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=bvino-lib.umd.min.js.map